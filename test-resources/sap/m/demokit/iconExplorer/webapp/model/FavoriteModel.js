sap.ui.define(["sap/ui/demo/iconexplorer/model/Sorter","sap/ui/model/json/JSONModel","sap/ui/util/Storage","sap/base/Log"],function(t,e,o,i){"use strict";return e.extend("sap.ui.demo.iconexplorer.model.FavoriteModel",{_STORAGE_KEY:"ICON_EXPLORER_FAVORITES",_storage:new o(o.Type.local),constructor:function(t){e.apply(this,arguments);this.setSizeLimit(1e6);var o=this._storage.get(this._STORAGE_KEY);var r;try{r=JSON.parse(o)}catch(t){i.warning("FavoriteModel: Could not parse the data read from local storage")}if(!r){r={count:0,icons:[]}}this.setData(r);return this},isFavorite:function(t){var e=this.getData();return e.icons.some(function(e){return e.name===t})},toggleFavorite:function(e){var o=e.getProperty("name"),i=this.isFavorite(o),r=this.getData();if(i){r.icons=r.icons.filter(function(t){return t.name!==o})}else{r.icons.push(e.getObject())}r.count=r.icons.length;r.icons.sort(t.sortByName);this.setData(r);var s=JSON.stringify(r);this._storage.put(this._STORAGE_KEY,s);return!i}})});