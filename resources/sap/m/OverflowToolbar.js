/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/library","sap/ui/core/Core","./library","sap/ui/core/Control","sap/m/ToggleButton","sap/ui/core/InvisibleText","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbarAssociativePopover","sap/m/OverflowToolbarAssociativePopoverControls",'sap/ui/core/ResizeHandler',"sap/ui/core/IconPool",'sap/ui/core/theming/Parameters','sap/ui/dom/units/Rem',"sap/ui/Device","./OverflowToolbarRenderer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Focusable"],function(c,C,l,a,T,I,b,d,O,e,f,R,g,P,D,h,j,L,q){"use strict";var k=l.PlacementType;var B=l.ButtonType;var A=c.aria.HasPopup;var m=l.OverflowToolbarPriority;var n=b.extend("sap.m.OverflowToolbar",{metadata:{properties:{asyncMode:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{_overflowButton:{type:"sap.m.ToggleButton",multiple:false,visibility:"hidden"},_popover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},designtime:"sap/m/designtime/OverflowToolbar.designtime"}});n.ARIA_ROLE_DESCRIPTION="OVERFLOW_TOOLBAR_ROLE_DESCRIPTION";n.CONTENT_SIZE_TOLERANCE=1;n.prototype._callToolbarMethod=function(F,i){return b.prototype[F].apply(this,i);};n.prototype.init=function(){this._callToolbarMethod("init",arguments);this._iPreviousToolbarWidth=null;this._bOverflowButtonNeeded=false;this._bListenForControlPropertyChanges=false;this._bListenForInvalidationEvents=false;this._bControlsInfoCached=false;this._bSkipOptimization=false;this._aControlSizes={};this._iFrameRequest=null;this._iOverflowToolbarButtonSize=0;this._oOverflowToolbarButtonClone=null;this._iToolbarOnlyContentSize=0;this._aMovableControls=[];this._aToolbarOnlyControls=[];this._aPopoverOnlyControls=[];this._aAllCollections=[this._aMovableControls,this._aToolbarOnlyControls,this._aPopoverOnlyControls];this.addStyleClass("sapMOTB");this._sAriaRoleDescription=C.getLibraryResourceBundle("sap.m").getText(n.ARIA_ROLE_DESCRIPTION);this._fnMediaChangeRef=this._fnMediaChange.bind(this);h.media.attachHandler(this._fnMediaChangeRef);};n.prototype.exit=function(){var p=this.getAggregation("_popover");if(p){p.destroy();}if(this._oOverflowToolbarButtonClone){this._oOverflowToolbarButtonClone.destroy();}if(this._iFrameRequest){window.cancelAnimationFrame(this._iFrameRequest);this._iFrameRequest=null;}h.media.detachHandler(this._fnMediaChangeRef);};n.prototype.setAsyncMode=function(v){return this.setProperty("asyncMode",v,true);};n.prototype.onAfterRendering=function(){this._bInvalidatedAndNotRendered=false;if(this._bContentVisibilityChanged){this._bControlsInfoCached=false;this._bContentVisibilityChanged=false;}if(this.getAsyncMode()){this._doLayoutAsync().then(this._applyFocus.bind(this));}else{this._doLayout();this._applyFocus();}};n.prototype.onsapfocusleave=function(){this._resetChildControlFocusInfo();};n.prototype.setWidth=function(w){this.setProperty("width",w);this._bResized=true;return this;};n.prototype._doLayout=function(){var w;if(!C.isThemeApplied()){L.debug("OverflowToolbar: theme not applied yet, skipping calculations",this);return;}this._recalculateOverflowButtonSize();w=this.$().is(":visible")?this.$().width():0;this._bListenForControlPropertyChanges=false;this._bListenForInvalidationEvents=false;this._deregisterToolbarResize();if(w>0){if(!this._isControlsInfoCached()||(this._bNeedUpdateOnControlsCachedSizes&&this._bResized)){this._cacheControlsInfo();}if(this._iPreviousToolbarWidth!==w){this._iPreviousToolbarWidth=w;this._setControlsOverflowAndShrinking(w);this.fireEvent("_controlWidthChanged");}}this._registerToolbarResize();this._bListenForControlPropertyChanges=true;this._bListenForInvalidationEvents=true;this._bResized=false;};n.prototype._doLayoutAsync=function(){return new Promise(function(r,i){this._iFrameRequest=window.requestAnimationFrame(function(){this._doLayout();r();}.bind(this));}.bind(this));};n.prototype._applyFocus=function(){var F,$=this.$().lastFocusableDomRef();if(this.sFocusedChildControlId){F=C.byId(this.sFocusedChildControlId);}if(F&&F.getDomRef()){F.focus();}else if(this._bControlWasFocused){this._getOverflowButton().focus();this._bControlWasFocused=false;this._bOverflowButtonWasFocused=true;}else if(this._bOverflowButtonWasFocused&&!this._getOverflowButtonNeeded()){$&&$.focus();this._bOverflowButtonWasFocused=false;}};n.prototype._preserveChildControlFocusInfo=function(){var s=C.getCurrentFocusedControlId();if(this._getControlsIds().indexOf(s)!==-1){this._bControlWasFocused=true;this.sFocusedChildControlId=s;}else if(s===this._getOverflowButton().getId()){this._bOverflowButtonWasFocused=true;this.sFocusedChildControlId="";}};n.prototype._resetChildControlFocusInfo=function(){this._bControlWasFocused=false;this._bOverflowButtonWasFocused=false;this.sFocusedChildControlId="";};n.prototype._registerToolbarResize=function(){if(b.isRelativeWidth(this.getWidth())){var r=this._handleResize.bind(this);this._sResizeListenerId=R.register(this,r);}};n.prototype._deregisterToolbarResize=function(){if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId="";}};n.prototype._handleResize=function(){this._bResized=true;if(this._bInvalidatedAndNotRendered){return;}this._callDoLayout();};n.prototype._fnMediaChange=function(){this._bControlsInfoCached=false;this._iPreviousToolbarWidth=null;this._callDoLayout();};n.prototype._callDoLayout=function(){if(this.getAsyncMode()){this._doLayoutAsync();}else{this._doLayout();}};n.prototype._cacheControlsInfo=function(){var v,H,i=parseInt(this.$().css("padding-right"))||0,r=parseInt(this.$().css("padding-left"))||0,o=this._getOverflowButtonSize(),t=this._iToolbarOnlyContentSize;this._iOldContentSize=this._iContentSize;this._iContentSize=0;this._iToolbarOnlyContentSize=0;this._bNeedUpdateOnControlsCachedSizes=false;this.getContent().forEach(this._updateControlsCachedSizes,this);if(t!==this._iToolbarOnlyContentSize){this.fireEvent("_minWidthChange",{minWidth:this._iToolbarOnlyContentSize>0?this._iToolbarOnlyContentSize+o:0});}if(h.system.phone){this._iContentSize-=1;}if(this._aPopoverOnlyControls.length){v=this._aPopoverOnlyControls.filter(function(p){return p.getVisible();});H=(v.length>0);if(H){this._iContentSize+=o;}}this._bControlsInfoCached=true;if(this._iOldContentSize!==this._iContentSize){this.fireEvent("_contentSizeChange",{contentSize:this._iContentSize+i+r+1});}};n.prototype._updateControlsCachedSizes=function(o){var p,i,w;p=this._getControlPriority(o);i=this._calculateControlSize(o);this._aControlSizes[o.getId()]=i;w=b.getOrigWidth(o.getId());if(w&&b.isRelativeWidth(w)){this._bNeedUpdateOnControlsCachedSizes=true;}if(p!==m.AlwaysOverflow){this._iContentSize+=i;}if(p===m.NeverOverflow){this._iToolbarOnlyContentSize+=i;}};n.prototype._calculateControlSize=function(o){return this._getOptimalControlWidth(o,this._aControlSizes[o.getId()]);};n.prototype._isControlsInfoCached=function(){return this._bControlsInfoCached;};n.prototype._flushButtonsToPopover=function(){this._aButtonsToMoveToPopover.forEach(this._moveButtonToPopover,this);};n.prototype._invalidateIfHashChanged=function(H){if(typeof H==="undefined"||this._getPopover()._getContentIdsHash()!==H){this._preserveChildControlFocusInfo();this.invalidate();}};n.prototype._addOverflowButton=function(){if(!this._getOverflowButtonNeeded()){this._iCurrentContentSize+=this._getOverflowButtonSize();this._setOverflowButtonNeeded(true);}};n.prototype._aggregateMovableControls=function(){var G={},i=[],o,p,s,r,t;this._aMovableControls.forEach(function(u){o=n._getControlGroup(u);p=n._oPriorityOrder;if(o){s=this._getControlPriority(u);r=this._getControlIndex(u);G[o]=G[o]||[];t=G[o];t.unshift(u);if(!t._priority||p[t._priority]<p[s]){t._priority=s;}if(!t._index||t._index<r){t._index=r;}}else{i.push(u);}},this);Object.keys(G).forEach(function(u){i.push(G[u]);});return i;};n.prototype._extractControlsToMoveToOverflow=function(o,t){var i,M;for(i=0;i<o.length;i++){M=o[i];if(M.length){M.forEach(this._addToPopoverArrAndUpdateContentSize,this);}else{this._addToPopoverArrAndUpdateContentSize(M);}if(this._getControlPriority(M)!==m.Disappear){this._addOverflowButton();}if(this._iCurrentContentSize<=t){break;}}};n.prototype._addToPopoverArrAndUpdateContentSize=function(o){this._aButtonsToMoveToPopover.unshift(o);this._iCurrentContentSize-=this._aControlSizes[o.getId()];};n.prototype._sortByPriorityAndIndex=function(v,i){var p=n._oPriorityOrder,s=this._getControlPriority(v),o=this._getControlPriority(i),r=p[s]-p[o];if(r!==0){return r;}else{return this._getControlIndex(i)-this._getControlIndex(v);}};n.prototype._setControlsOverflowAndShrinking=function(t){var i;this._iCurrentContentSize=this._iContentSize;this._aButtonsToMoveToPopover=[];if(this._bSkipOptimization){this._bSkipOptimization=false;}else{i=this._getPopover()._getContentIdsHash();}this._resetToolbar();this._collectPopoverOnlyControls();this._markControlsWithShrinkableLayoutData();if(this._iCurrentContentSize<=(t+n.CONTENT_SIZE_TOLERANCE)){this._flushButtonsToPopover();this._invalidateIfHashChanged(i);return;}this._moveControlsToPopover(t);this._flushButtonsToPopover();if(this._iCurrentContentSize>t){this._checkContents();}this._invalidateIfHashChanged(i);};n.prototype._markControlsWithShrinkableLayoutData=function(){this.getContent().forEach(this._markControlWithShrinkableLayoutData,this);};n.prototype._collectPopoverOnlyControls=function(){var p=this._aPopoverOnlyControls.length,i,o;if(p){for(i=p-1;i>=0;i--){o=this._aPopoverOnlyControls[i];if(o.getVisible()){this._aButtonsToMoveToPopover.unshift(o);}}if(this._aButtonsToMoveToPopover.length>0){this._setOverflowButtonNeeded(true);}}};n.prototype._moveControlsToPopover=function(t){var i=[];if(this._aMovableControls.length){i=this._aggregateMovableControls();i.sort(this._sortByPriorityAndIndex.bind(this));this._extractControlsToMoveToOverflow(i,t);}};n.prototype._markControlWithShrinkableLayoutData=function(o){var w,i,s,p;o.removeStyleClass(b.shrinkClass);w=b.getOrigWidth(o.getId());if(!b.isRelativeWidth(w)){return;}i=o.getLayoutData();s=i&&i.isA("sap.m.ToolbarLayoutData")&&i.getShrinkable();p=o.isA("sap.m.Breadcrumbs");if(s||p){o.addStyleClass(b.shrinkClass);}};n.prototype._resetToolbar=function(){this._getPopover().close();this._getPopover()._getAllContent().forEach(this._restoreButtonInToolbar,this);this._setOverflowButtonNeeded(false);this.getContent().forEach(this._removeShrinkingClass);};n.prototype._removeShrinkingClass=function(o){o.removeStyleClass(b.shrinkClass);};n.prototype._moveButtonToPopover=function(o){this._getPopover().addAssociatedContent(o);};n.prototype._restoreButtonInToolbar=function(v){if(typeof v==="object"){v=v.getId();}this._getPopover().removeAssociatedContent(v);};n.prototype._resetAndInvalidateToolbar=function(H){if(this._bIsBeingDestroyed){return;}this._resetToolbar();this._bControlsInfoCached=false;this._iPreviousToolbarWidth=null;if(H){this._bSkipOptimization=true;}if(this.$().length){this._preserveChildControlFocusInfo();this.invalidate();}};n.prototype.invalidate=function(){this._bInvalidatedAndNotRendered=true;a.prototype.invalidate.apply(this,arguments);};n.prototype._getVisibleContent=function(){var t=this.getContent(),p=this._getPopover()._getAllContent();return t.filter(function(o){return p.indexOf(o)===-1;});};n.prototype._getVisibleAndNonOverflowContent=function(){return this._getVisibleContent().filter(function(o){return o.getVisible();});};n.prototype._getToggleButton=function(i){return new T({ariaHasPopup:A.Menu,id:this.getId()+i,icon:g.getIconURI("overflow"),press:this._overflowButtonPressed.bind(this),ariaLabelledBy:I.getStaticId("sap.ui.core","Icon.overflow"),type:B.Transparent});};n.prototype._getOverflowButton=function(){var o;if(!this.getAggregation("_overflowButton")){o=this._getToggleButton("-overflowButton");this.setAggregation("_overflowButton",o,true);}return this.getAggregation("_overflowButton");};n.prototype._getOverflowButtonClone=function(){if(!this._oOverflowToolbarButtonClone){this._oOverflowToolbarButtonClone=this._getToggleButton("-overflowButtonClone").addStyleClass("sapMTBHiddenElement");}this._oOverflowToolbarButtonClone._getTooltip=function(){return"";};this._oOverflowToolbarButtonClone.removeAllAssociation("ariaLabelledBy");return this._oOverflowToolbarButtonClone;};n.prototype._overflowButtonPressed=function(E){var p=this._getPopover(),s=this._getBestPopoverPlacement();if(p.getPlacement()!==s){p.setPlacement(s);}if(p.isOpen()){p.close();}else{p.openBy(E.getSource());}};n.prototype._getPopover=function(){var p;if(!this.getAggregation("_popover")){p=new e(this.getId()+"-popover",{showHeader:false,showArrow:false,modal:false,horizontalScrolling:h.system.phone?false:true,contentWidth:h.system.phone?"100%":"auto",offsetY:this._detireminePopoverVerticalOffset(),ariaLabelledBy:I.getStaticId("sap.m","INPUT_AVALIABLE_VALUES")});p._adaptPositionParams=function(){e.prototype._adaptPositionParams.call(this);this._myPositions=["end top","begin center","end bottom","end center"];this._atPositions=["end bottom","end center","end top","begin center"];};if(h.system.phone){p.attachBeforeOpen(this._shiftPopupShadow,this);}p.attachAfterClose(this._popOverClosedHandler,this);this.setAggregation("_popover",p,true);}return this.getAggregation("_popover");};n.prototype._shiftPopupShadow=function(){var p=this._getPopover(),s=p.getCurrentPosition();if(s===k.Bottom){p.addStyleClass("sapMOTAPopoverNoShadowTop");p.removeStyleClass("sapMOTAPopoverNoShadowBottom");}else if(s===k.Top){p.addStyleClass("sapMOTAPopoverNoShadowBottom");p.removeStyleClass("sapMOTAPopoverNoShadowTop");}};n.prototype._popOverClosedHandler=function(){this._getOverflowButton().setPressed(false);if(q(document.activeElement).control(0)){return;}this._getOverflowButton().focus();};n.prototype._getOverflowButtonNeeded=function(){return this._bOverflowButtonNeeded;};n.prototype._setOverflowButtonNeeded=function(v){if(this._bOverflowButtonNeeded!==v){this._bOverflowButtonNeeded=v;}return this;};n.prototype._updateContentInfoInControlsCollections=function(){this.getContent().forEach(function(o){if(o){this._removeContentFromControlsCollections(o);this._moveControlInSuitableCollection(o,this._getControlPriority(o));}},this);};n.prototype._moveControlInSuitableCollection=function(o,p){var i=p!==m.NeverOverflow,r=p===m.AlwaysOverflow;if(f.supportsControl(o)&&r){this._aPopoverOnlyControls.push(o);}else{if(f.supportsControl(o)&&i&&o.getVisible()){this._aMovableControls.push(o);}else{this._aToolbarOnlyControls.push(o);}}};n.prototype._removeContentFromControlsCollections=function(o){var i,p,r;for(i=0;i<this._aAllCollections.length;i++){p=this._aAllCollections[i];r=p.indexOf(o);if(r!==-1){p.splice(r,1);}}};n.prototype._clearAllControlsCollections=function(){this._aMovableControls=[];this._aToolbarOnlyControls=[];this._aPopoverOnlyControls=[];this._aAllCollections=[this._aMovableControls,this._aToolbarOnlyControls,this._aPopoverOnlyControls];};n.prototype.onLayoutDataChange=function(E){this._resetAndInvalidateToolbar(true);E&&this._updateContentInfoInControlsCollections();};n.prototype.addContent=function(o){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o));}this._informNewFlexibleContentAdded(o);return this._callToolbarMethod("addContent",arguments);};n.prototype.insertContent=function(o,i){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o));}this._informNewFlexibleContentAdded(o);return this._callToolbarMethod("insertContent",arguments);};n.prototype.removeContent=function(){var v=this._callToolbarMethod("removeContent",arguments);if(v){this._getPopover().removeAssociatedContent(v.getId());}this._resetAndInvalidateToolbar(false);this._deregisterControlListener(v);this._removeContentFromControlsCollections(v);return v;};n.prototype.removeAllContent=function(){var i=this._callToolbarMethod("removeAllContent",arguments);i.forEach(this._deregisterControlListener,this);i.forEach(this._removeContentFromControlsCollections,this);this._resetAndInvalidateToolbar(false);this._clearAllControlsCollections();return i;};n.prototype.destroyContent=function(){this._resetAndInvalidateToolbar(false);setTimeout(function(){this._resetAndInvalidateToolbar(false);}.bind(this),0);this._clearAllControlsCollections();return this._callToolbarMethod("destroyContent",arguments);};n.prototype._informNewFlexibleContentAdded=function(o){if(o&&o.isA("sap.m.IOverflowToolbarFlexibleContent")){this.fireEvent("_contentSizeChange",{contentSize:null});}};n.prototype._registerControlListener=function(o){var i;if(o){o.attachEvent("_change",this._onContentPropertyChangedOverflowToolbar,this);if(o.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")>-1){i=o.getOverflowToolbarConfig().invalidationEvents;if(i&&Array.isArray(i)){i.forEach(function(E){o.attachEvent(E,this._onInvalidationEventFired,this);},this);}}}};n.prototype._deregisterControlListener=function(o){var i;if(o){o.detachEvent("_change",this._onContentPropertyChangedOverflowToolbar,this);if(o.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")>-1){i=o.getOverflowToolbarConfig().invalidationEvents;if(i&&Array.isArray(i)){i.forEach(function(E){o.detachEvent(E,this._onInvalidationEventFired,this);},this);}}}};n.prototype._onContentPropertyChangedOverflowToolbar=function(E){var s=E.getSource(),o,p;this._updateContentInfoInControlsCollections();if(!this._bListenForControlPropertyChanges){return;}o=f.getControlConfig(s);p=E.getParameter("name");if(p!=='visible'&&!s.getVisible()){return;}if(typeof o!=="undefined"&&o.noInvalidationProps.indexOf(p)!==-1){return;}if(p==="visible"){this._bContentVisibilityChanged=true;}if(s.isA("sap.m.IOverflowToolbarFlexibleContent")&&s.getVisible()){this.fireEvent("_contentSizeChange",{contentSize:null});}this._resetAndInvalidateToolbar(true);};n.prototype._onInvalidationEventFired=function(E){var s=E.getSource();if(!this._bListenForInvalidationEvents){return;}if(s.isA("sap.m.IOverflowToolbarFlexibleContent")){this.fireEvent("_contentSizeChange",{contentSize:null});}this._resetAndInvalidateToolbar(true);};n.prototype._getOverflowButtonSize=function(){return this._iOverflowToolbarButtonSize;};n.prototype._getBestPopoverPlacement=function(){var H=this.getHTMLTag();if(H==="Footer"){return k.Top;}else if(H==="Header"){return k.Bottom;}return k.Vertical;};n.prototype._getControlsIds=function(){return this.getContent().map(function(i){return i.getId();});};n.prototype._getControlIndex=function(v){return v.length?v._index:this.indexOfContent(v);};n.prototype._getOptimalControlWidth=function(o,i){var p,r=o.getLayoutData(),s=r&&r.isA("sap.m.ToolbarLayoutData"),v=o.getVisible(),t=o.isA("sap.m.Breadcrumbs"),S=false,M,u;if(t){S=true;}else if(s){S=r.getShrinkable();}M=S?this._getMinWidthOfShrinkableControl(o):0;if(o.isA("sap.m.ToolbarSpacer")){u=parseInt(o.$().css('width'));M=(o.getWidth()&&u)?u:0;p=n._getOptimalWidthOfShrinkableControl(o,M);}else if(S&&M>0&&v){p=n._getOptimalWidthOfShrinkableControl(o,M);}else{p=v?n._getControlWidth(o):0;}if(p===null){p=typeof i!=="undefined"?i:0;}return p;};n.prototype._getMinWidthOfShrinkableControl=function(o){var M=o.$().css("min-width"),i=parseInt(M),r=b.isRelativeWidth(M);if(r){return(i*this.$().width())/100;}else{return i;}};n.prototype._getControlPriority=function(v){var i,o,p,G;if(v.length){return v._priority;}i=v.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")>-1;G=i&&v.getOverflowToolbarConfig().getCustomImportance;if(i&&typeof G==="function"){return G();}o=v.getLayoutData&&v.getLayoutData();if(o&&o instanceof O){if(o.getMoveToOverflow()===false){return m.NeverOverflow;}if(o.getStayInOverflow()===true){return m.AlwaysOverflow;}p=o.getPriority();if(p===m.Never){return m.NeverOverflow;}if(p===m.Always){return m.AlwaysOverflow;}return p;}return m.High;};n._getControlMargins=function(o){return o.$().outerWidth(true)-o.$().outerWidth();};n._getOptimalWidthOfShrinkableControl=function(o,M){return M+n._getControlMargins(o);};n._getControlWidth=function(o){var i=o&&o.getDomRef();if(i&&o.$().is(":visible")){return Math.round(i.getBoundingClientRect().width+n._getControlMargins(o));}return null;};n.prototype.getAccessibilityInfo=function(){var i=[],v=this._getVisibleAndNonOverflowContent();if(v.length>0){i=i.concat(v);}if(this._getOverflowButtonNeeded()){i.push(this._getOverflowButton());}return{children:i};};n._getControlGroup=function(o){var i=o.getLayoutData();if(i instanceof O){return i.getGroup();}};n._oPriorityOrder=(function(){var p={};p[m.Disappear]=1;p[m.Low]=2;p["Medium"]=3;p[m.High]=4;return p;})();n.prototype._detireminePopoverVerticalOffset=function(){return this.$().parents().hasClass('sapUiSizeCompact')?2:3;};n.prototype._recalculateOverflowButtonSize=function(){var o=this._getOverflowButtonClone().$(),i;if(!this._getOverflowButtonSize()&&o.width()>0){i=o.outerWidth(true);this._iOverflowToolbarButtonSize=i?i:0;}};n.prototype.onThemeChanged=function(){this._resetAndInvalidateToolbar();this._iOverflowToolbarButtonSize=0;this._recalculateOverflowButtonSize();for(var i in this._aControlSizes){if(this._aControlSizes.hasOwnProperty(i)){this._aControlSizes[i]=0;}}};n.prototype.closeOverflow=function(){this._getPopover().close();};return n;});
