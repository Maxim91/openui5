/* !
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_pick","sap/base/util/ObjectPath","sap/ui/core/Core","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(_,O,C,a,F,L,f){"use strict";var b={BASE_FLEX_OBJECT:F,COMP_VARIANT_OBJECT:a};function g(n){if(n.fileType==="variant"){return b.COMP_VARIANT_OBJECT;}return b.BASE_FLEX_OBJECT;}var c={};c.createFromFileContent=function(o,d){var n=Object.assign({},o);var e=d||g(n);if(!e){throw new Error("Unknown file type");}n.support=Object.assign({generator:"FlexObjectFactory.createFromFileContent",sapui5Version:C.getConfiguration().getVersion().toString()},n.support||{});var m=e.getMappingInfo();var h=F.mapFileContent(n,m);var p=Object.entries(h).reduce(function(P,j){O.set(j[0].split('.'),j[1],P);return P;},{});var i=new e(p);return i;};c.createCompVariant=function(o){var s=o.fileName||o.id||f.createDefaultFileName(o.fileType);var m={id:s,variantId:o.variantId||s,content:o.content||{},contexts:o.contexts||{},layer:o.layer,favorite:o.favorite,texts:o.texts,persistencyKey:o.persistencyKey||O.get("selector.persistencyKey",o),persisted:o.persisted,supportInformation:{service:o.ODataService,command:o.command,generator:o.generator||"FlexObjectFactory.createCompVariant",user:O.get("support.user",o),sapui5Version:C.getConfiguration().getVersion().toString(),sourceSystem:o.sourceSystem,sourceClient:o.sourceClient,originalLanguage:o.originalLanguage},flexObjectMetadata:{changeType:o.type,reference:o.reference,packageName:o.packageName,creation:o.creation}};if(o.layer===L.VENDOR||o.layer===L.CUSTOMER_BASE){m.favorite=true;}if(o.executeOnSelection!==undefined){m.executeOnSelection=o.executeOnSelection;}else{m.executeOnSelection=m.content&&(m.content.executeOnSelect||m.content.executeOnSelection);}return new a(m);};return c;});
