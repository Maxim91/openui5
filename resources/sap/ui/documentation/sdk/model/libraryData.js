/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/documentation/library","sap/base/Log","sap/base/util/extend","sap/base/util/isPlainObject"],function(l,L,e,a){"use strict";var I={Template:"Template"};function c(d,s,f){var g=[];if(a(d.links)){g=Object.keys(d.links).map(function(k){return{name:k,ref:d.links[k]};});}var A={lib:d.namespace||f,name:d.text,icon:d.icon,desc:d.desc,config:d.config,teaser:d.teaser,category:d.category,ref:(d.resolve==="lib"?s:"")+d.ref+"?sap-ui-theme=sap_fiori_3",links:g};return A;}function b(d,D){var C=["Showcase","Tutorial","Template","RTA","Misc"];var o={};C.forEach(function(s){o[s]=[];});var f={demoApps:[],demoAppsByCategory:[]};for(var i=0;i<d.length;i++){var g=D[d[i]].demo;if(!g){continue;}if(g.links&&g.links.length>0){for(var j=0;j<g.links.length;j++){var h=c(g.links[j],D[d[i]].libraryUrl,g.text);if(I[h.category]){continue;}f.demoApps.push(h);if(C.indexOf(h.category)<0){L.warning("Demo app category \""+h.category+"\" not found, correcting demo app \""+h.name+"\" to \"Misc\"");h.category="Misc";}if(g.links[j].category!=="Tool"){o[h.category].push(h);}}}}Object.keys(o).forEach(function(k){if(o[k].length===0){return;}var r=[];var m=r.push([]);var n=0;for(var i=0;i<o[k].length;i++){n++;if(o[k][i].teaser){n++;}if(n>4){m=r.push([]);n=0;}r[m-1].push(o[k][i]);}f.demoAppsByCategory.push({categoryId:k,rows:r});});return f;}return{fillJSONModel:function(m){function h(d,D){m.setProperty("/bFooterVisible",true);if(!d){return;}var M=m.getData();m.setData(e(M,b(d,D)));}m.setProperty("/bFooterVisible",false);l._loadAllLibInfo("","_getDocuIndex",h);},getDemoAppsData:function(){return new Promise(function(r){l._loadAllLibInfo("","_getDocuIndex",function(d,D){if(!d){return;}r(b(d,D));});});}};});
